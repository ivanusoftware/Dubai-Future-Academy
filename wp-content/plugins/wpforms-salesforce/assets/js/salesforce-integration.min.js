"use strict";var WPFormsSalesforceIntegration=window.WPFormsSalesforceIntegration||function(e,s){var c={init:function(){s(e).on("wpformsReady",c.ready)},ready:function(){c.events()},events:function(){s("#wpforms-integration-salesforce").on("click",".wpforms-settings-provider-submit",c.callbacks.connectClick).on("click",".wpforms-salesforce-setting-field-redirect-copy",c.callbacks.copyUrlClick)},callbacks:{connectClick:function(){var t=s(this),e=s(t.prop("form")),n=e.find('input[name="client_id"]'),r=e.find('input[name="client_secret"]'),n=n.val().trim(),r=r.val().trim();""!==n&&""!==r?c.requests.integrationConnect(t,{client_id:n,client_secret:r}):(e.find(".wpforms-settings-provider-accounts-connect-fields").addClass("form-invalid"),e=wpforms_admin.provider_auth_error+"<br>"+wpformsSalesforceIntegrationVars.required_data,c.modals.integrationError(e))},copyUrlClick:function(){var t=s(this);s("#"+t.data("source_id")).get(0).select(),e.execCommand("Copy"),t.removeClass("animate"),this.offsetWidth,t.addClass("animate")}},requests:{integrationConnect:function(r,t){var o=s(r.prop("form")),e=r.outerWidth(),a=r.text(),i=wpforms_admin.provider_auth_error,t={url:wpforms_admin.ajax_url,type:"post",dataType:"json",data:{action:"wpforms_settings_provider_add_salesforce",nonce:wpforms_admin.nonce,data:t},beforeSend:function(){o.find(".wpforms-settings-provider-accounts-connect-fields").removeClass("form-invalid"),r.css("width",e).html("Connecting...").prop("disabled",!0)}};s.ajax(t).done(function(t,e,n){return t.success?(o.find('input[name="state"]').val(c.escapeTextString(t.data.state)),void o.submit()):(Object.prototype.hasOwnProperty.call(t,"data")&&Object.prototype.hasOwnProperty.call(t.data,"error_msg")&&(i+="<br>"+t.data.error_msg),void c.modals.integrationError(i))}).fail(function(t,e,n){c.modals.integrationError(i)}).always(function(t,e,n){r.css("width","auto").html(a).prop("disabled",!1)})}},modals:{integrationError:function(t){s.alert({title:!1,content:t,icon:"fa fa-exclamation-circle",type:"orange",buttons:{confirm:{text:wpforms_admin.ok,btnClass:"btn-confirm",keys:["enter"]}}})}},escapeTextString:function(t){return s("<span></span>").text(t).html()}};return c}(document,(window,jQuery));WPFormsSalesforceIntegration.init();